---
title: "Getting Started with quartify"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Getting Started with quartify}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

::: {.alert .alert-info}
üá´üá∑ **[Version fran√ßaise disponible](getting-started_FR.html)** / **French version available**
:::

## Introduction

`quartify` is an R package that automatically converts R scripts into Quarto markdown documents (.qmd). The package recognizes RStudio code sections to create properly structured documents with navigation. This vignette will guide you through the basic usage and features of the package.

### Comparison with knitr::spin()

If you're familiar with [`knitr::spin()`](https://yihui.org/knitr/demo/stitch/), you might wonder how `quartify` differs:

| Feature | knitr::spin() | quartify |
|---------|---------------|----------|
| **Output Format** | R Markdown (.Rmd) | Quarto (.qmd) |
| **Text Syntax** | `#'` for markdown | `#` (natural R comments) |
| **Chunk Options** | `#+` prefix | RStudio code sections |
| **Modern Features** | Limited to R Markdown | Full Quarto capabilities |
| **Callouts** | Manual HTML/CSS | Native Quarto callouts |
| **Diagrams** | External tools | Native Mermaid support |
| **Themes** | Limited R Markdown themes | 25+ modern Quarto themes |

**Why choose quartify?**

1. **Modern Quarto Ecosystem**: Benefit from Quarto's next-generation features (callouts, tabsets, cross-references, Observable JS, etc.)
2. **Cleaner R Scripts**: Use natural R commenting without special `#'` or `#+` syntax - your scripts remain readable as standalone R code
3. **Advanced Outputs**: Generate websites, books, presentations, and scientific articles with the same workflow
4. **Better Theming**: Access to modern, responsive HTML themes with consistent styling
5. **Future-Proof**: Quarto is actively developed by Posit as the successor to R Markdown

S## Installation

You can install the development version of quartify from GitHub:

```{r, eval=FALSE}
# install.packages("devtools")
devtools::install_github("ddotta/quartify")
```

## Basic Usage

The main function of the package is `rtoqmd()`. Here's a simple example:

```{r eval=FALSE}
library(quartify)

# Convert an R script to a Quarto document and render to HTML
rtoqmd("my_script.R", "my_document.qmd")

# Convert only, without rendering to HTML
rtoqmd("my_script.R", "my_document.qmd", render = FALSE)
```

By default, `rtoqmd()` will:
1. Create the .qmd file
2. Render it to HTML using Quarto
3. Open the HTML file in your default browser

### Output File Locations

Understanding where files are created:

- **If you specify an `output_file` path**: The .qmd file is created at that exact location, and the .html file (if rendered) is created in the same directory with the same base name.

```{r eval=FALSE}
# Creates: /path/to/my_analysis.qmd and /path/to/my_analysis.html
rtoqmd("script.R", "/path/to/my_analysis.qmd")
```

- **If you don't specify `output_file`**: The .qmd file is created in the same directory as your input R script, with the `.R` extension replaced by `.qmd`.

```{r eval=FALSE}
# If script.R is in /home/user/scripts/
# Creates: /home/user/scripts/script.qmd and /home/user/scripts/script.html
rtoqmd("/home/user/scripts/script.R")
```

- **Relative paths**: If you use relative paths, files are created relative to your current working directory (check with `getwd()`).

```{r eval=FALSE}
# Creates files in your current working directory
rtoqmd("script.R", "output.qmd")
```

## Using the RStudio Addin

`quartify` provides an interactive RStudio addin for easy conversion without writing code. This is perfect for quick conversions while working in RStudio.

### Accessing the Addin

To use the addin:

1. **From RStudio menu**: Go to **Addins** > **"Convert R to Quarto (rtoqmd)"**
2. The interactive interface will open in a new window

::: {.alert .alert-info}
**Tip:** You can also bind a keyboard shortcut to the addin for even faster access. Go to **Tools** > **Modify Keyboard Shortcuts** and search for "quartify" to assign your preferred shortcut.
:::

### Interface Overview

The addin features a modern, intuitive interface with:

- **Blue title bar** with language switcher (EN/FR flags)
- **GENERATE button** prominently placed at the top below the title bar, next to the quartify logo
- **Mode selector** to choose between single file or directory conversion
- **File/directory browser** for easy selection
- **Real-time validation** and error messages

### Single File Mode

Perfect for converting one R script at a time:

1. **Select mode**: Choose "Single File Mode"
2. **Browse for input**: Click "Browse" to select your R script
3. **Set output location**: Optionally specify where to save the .qmd file (defaults to same directory as input)
4. **Configure options**:
   - **Render to HTML**: Check to automatically generate HTML output
   - **Open HTML**: Check to open the result in your browser
5. **Click GENERATE**: The blue GENERATE button at the top starts the conversion

The addin will show success/error messages and provide clickable links to output files.

### Directory Mode

Convert all R scripts in a directory at once:

1. **Select mode**: Choose "Directory Mode"
2. **Browse for input directory**: Select the folder containing your R scripts
3. **Configure options**:
   - **Recursive**: Check to include subdirectories
   - **Render to HTML**: Generate HTML for all files
   - **Create Book**: Automatically create a `_quarto.yml` file to combine all documents into a Quarto book
4. **Output directory** (Optional): Choose where to save converted files (defaults to same location as input files)
5. **Click GENERATE**: Start batch conversion

::: {.callout-note}
**Create Book Feature**: When enabled, this option creates a `_quarto.yml` configuration file in the output directory, allowing you to render all converted documents as a unified Quarto book with automatic navigation and consistent styling. This is ideal for project documentation or analysis collections.
:::

### Advanced Features

The addin includes several quality-of-life improvements:

- **Volume management**: Easily navigate across different drives and network locations
- **Path validation**: Real-time checks for valid file/directory paths
- **Bilingual interface**: Switch between English and French instantly
- **Persistent settings**: Your last mode selection is remembered
- **Detailed feedback**: Clear success/error messages with file counts and locations

### When to Use the Addin

The RStudio addin is ideal for:

- **Interactive exploration**: Testing conversion on sample scripts
- **One-off conversions**: Quick document generation without scripting
- **Visual feedback**: Seeing results immediately with the GUI
- **Learning the package**: Understanding options before automating
- **Teaching**: Demonstrating quartify features to colleagues

For batch processing or CI/CD pipelines, consider using the programmatic functions (`rtoqmd()`, `rtoqmd_dir()`) instead.

## Using the Standalone Shiny App

For users working outside RStudio or wanting to share a conversion tool with their team, `quartify` provides a standalone Shiny application.

### Launching the App

Simply run:

```{r eval=FALSE}
library(quartify)
quartify_app()
```

This opens the same intuitive interface as the RStudio addin, but in a standard browser window. The app can run on any system with R installed, making it perfect for:

- **Non-RStudio environments**: Use with VS Code, Jupyter, or other IDEs
- **Shared team tools**: Deploy on RStudio Connect or Shiny Server for team access
- **Demonstrations**: Show quartify features without requiring RStudio
- **Remote work**: Access from any browser if hosted on a server

### Features

The standalone app includes all the same features as the RStudio addin:

- **Single File Mode**: Convert individual R scripts with full control over output location and rendering options
- **Directory Mode**: Batch convert entire folders with recursive directory scanning
- **Create Book**: Generate `_quarto.yml` configuration for Quarto book projects
- **Bilingual Interface**: Switch between English and French with flag buttons
- **Modern UI**: Blue title bar, prominent GENERATE button, and intuitive layout

### Comparison with Addin

| Feature | RStudio Addin | Standalone App |
|---------|---------------|----------------|
| **Requires RStudio** | Yes | No |
| **Launch Method** | Addins menu | `quartify_app()` |
| **Interface** | Gadget window | Browser window |
| **File Browser** | Native file system | Native file system |
| **All Features** | ‚úì | ‚úì |
| **Shareable** | No | Yes (can deploy) |

### Deployment Options

The standalone app can be deployed for team access:

**Local Network:**
```{r eval=FALSE}
# Run on a specific port accessible to your network
shiny::runApp(system.file("shiny", "quartify_app", package = "quartify"), 
              host = "0.0.0.0", port = 3838)
```

**RStudio Connect / Shiny Server:**
Deploy as a standard Shiny application for enterprise-wide access.

### Web Version

For environments where file system access is restricted (cloud deployments, sandboxed environments), use the web version:

```{r eval=FALSE}
quartify_app_web()
```

This version features:

- **File upload**: Upload R scripts directly from your computer (single or multiple files)
- **File download**: Download generated files as .zip archives with organized structure
- **ZIP structure**: 
  - `qmd/` folder with all Quarto markdown files and configuration
  - `html/` folder with complete rendered book (including `index.html` and all resources)
- **Batch conversion**: Upload multiple files to create a complete Quarto book
- **Offline viewing**: Downloaded ZIP contains everything needed to view the book offline
- **Same conversion logic**: All quartify features available

Perfect for cloud deployments where direct file system access isn't available. The downloaded ZIP is ready to extract and view immediately in any browser.

## Structuring Your R Script

For optimal conversion, you need to follow specific commenting rules in your R script. `quartify` recognizes three types of lines:

### 0. Document Metadata (Optional)

You can define your document's metadata directly in your R script using special comments at the beginning of the file. These metadata will appear in the YAML header of the generated Quarto document.

**Recognized metadata:**

- **Title**: `# Title : My title` or `# Titre : Mon titre`
- **Author**: `# Author : My name` or `# Auteur : Mon nom`
- **Date**: `# Date : 2025-11-28`
- **Description**: `# Description : Description of your script`

::: {.alert .alert-success}
**Tip - RStudio Snippets:** quartify provides a function to automatically install useful snippets including `header`, `callout`, `mermaid`, and `tabset`:

```{r eval=FALSE}
# Install quartify snippets
install_quartify_snippets()
```

After installation and restarting RStudio, type the snippet name (e.g., `header`) followed by `Tab` in your R script to automatically insert the template.

You can also manually add snippets via Tools > Edit Code Snippets > R. See `?install_quartify_snippets` for more details.
:::

**Complete example with metadata:**

```r
# Title : Iris Data Analysis
#
# Author : Jane Doe
#
# Date : 2025-11-28
#
# Description : Explore differences between iris species
#

library(dplyr)

## Descriptive Analysis ####

# Calculate statistics by species

iris |> 
  group_by(Species) |>
  summarize(mean_sepal = mean(Sepal.Length))
```

**Behavior:**

- If metadata is found in the script, it **overrides** the `rtoqmd()` function parameters
- If no metadata is found, the function's `title` and `author` parameters are used
- Metadata lines are **automatically removed** from the document body (they only appear in the YAML)
- `Date` and `Description` metadata are optional

::: {.alert .alert-info}
**Rules for multi-line descriptions:**

The `Description` field can span multiple lines. To continue the description on a new line:

- Start the next line with `#` followed by **at least one space** and the continuation text
- Continuation lines are automatically concatenated with a space
- An empty line (or any other type of comment) ends the description

**Example:**

```r
# Title : Iris Data Analysis
#
# Author : Jane Doe
#
# Date : 2025-11-28
#
# Description : This analysis explores differences between iris species
# using various statistical methods and visualization techniques
# to identify patterns and correlations.
#

library(dplyr)
```

This will produce in the YAML:

```yaml
description: This analysis explores differences between iris species using various statistical methods and visualization techniques to identify patterns and correlations.
```
:::

### 1. Code Sections (Headers)

Use RStudio code section syntax to create headers at different levels. These sections MUST follow this exact pattern:

- **Level 2**: `## Title ####` (at least 4 `#` symbols at the end)
- **Level 3**: `### Title ====` (at least 4 `=` symbols at the end)
- **Level 4**: `#### Title ----` (at least 4 `-` symbols at the end)

::: {.alert .alert-warning}
<span style="color: red;">**Important rules:**

- There must be at least one space between the title text and the trailing symbols
- The trailing symbols must be at least 4 characters long
- You can use `#`, `=`, or `-` interchangeably (e.g., `## Title ====` works), but following the RStudio convention is recommended for consistency
- This follows the [RStudio code sections convention](https://docs.posit.co/ide/user/ide/guide/code/code-sections.html)</span>
:::

**Example:**

```r
## Data Loading ####

### Import CSV ====

#### Check Missing Values ----
```

### 2. Regular Comments (Text)

Single `#` comments become explanatory text in the Quarto document:

```r
# This is a regular comment
# It will appear as plain text in the output
# Use these to explain what your code does
```

**Rules:**

- Start with a single `#` **followed by a space** (no space before the `#`)
- Multiple consecutive comment lines are grouped together (with no empty lines between them)
- Empty comment lines separate comment blocks
- **Markdown Tables**: You can include Markdown tables in comments. Consecutive comment lines will be preserved together, allowing proper table rendering

::: {.alert .alert-warning}
**‚ö†Ô∏è Important for text conversion:**

For a comment to be correctly converted to Quarto text, the line must start with `#` **without any leading space**. If you have indentation spaces before the `#`, the comment will be ignored and remain in the code chunk.

**Correct example:**
```r
# This will be converted to text
result <- mean(x)
```

**Incorrect example (comment stays in code) :**
```r
if (condition) {
  # This will remain an R comment in the chunk
  result <- mean(x)
}
```
:::

::: {.callout-tip title="Tip: Split a long code chunk"}
You can use this rule to **split a long code chunk into multiple parts**. By inserting a comment **at the start of a line** (no space before `#`) between two code blocks, this comment will be converted to text and naturally create two separate chunks:

```r
data <- read.csv("file.csv")
data_clean <- na.omit(data)

# This comment splits the chunk into two parts

result <- mean(data_clean$value)
plot(result)
```

This will create two separate chunks instead of one large chunk.
:::

::: {.alert .alert-info}
**Important for Markdown Tables:** Table lines must be **isolated from other comments** with an empty line before and after the table. This ensures the table is treated as a separate block and will render correctly.
:::

**Markdown table example:**

```r
# Analysis results:

# | fruit  | price  |
# |--------|--------|
# | apple  | 2.05   |
# | pear   | 1.37   |
# | orange | 3.09   |
#
# The table above is properly isolated.
```

**Tip:** Use RStudio's [Comment/Uncomment shortcut](https://docs.posit.co/ide/user/ide/guide/productivity/text-editor.html#commentuncomment) (`Ctrl+Shift+C` on Windows/Linux or `Cmd+Shift+C` on Mac) to quickly add or remove comments from your code.

### 3. Roxygen2 Documentation

If your R script contains roxygen2 documentation blocks (lines starting with `#'`), **quartify** automatically converts them into elegant callout-note sections with the function name:

**Input (R script):**

```r
#' Add two numbers together
#'
#' @param x A numeric value
#' @param y A numeric value
#' @return The sum of x and y
#' @examples
#' add_numbers(2, 3)
#' @export
add_numbers <- function(x, y) {
  return(x + y)
}
```

**Output (Quarto document):**

```markdown
::: {.callout-note}
## Documentation - add_numbers

Add two numbers together

@param x A numeric value
@param y A numeric value
@return The sum of x and y
@examples
add_numbers(2, 3)
@export
:::

```{r}
add_numbers <- function(x, y) {
  return(x + y)
}
```
```

**Rules:**

- Roxygen2 blocks (lines starting with `#'`) are automatically detected
- The function name is extracted from the following function definition
- All roxygen2 tags (@param, @return, @examples, @export, etc.) are preserved
- The documentation appears as a beautiful callout box above the code
- Works with `rtoqmd()`, `rtoqmd_dir()`, and all Shiny applications

::: {.callout-tip title="Tip: Package Development"}
This feature is particularly useful when documenting R packages or sharing code with full API documentation. The roxygen2 blocks remain readable in the Quarto output without requiring users to build package documentation.
:::

### 4. Code Lines

Any line that is NOT a comment becomes executable R code:

```r
library(dplyr)

iris |> 
  filter(Species == "setosa") |>
  summarize(mean_length = mean(Sepal.Length))
```

**Rules:**

- Consecutive code lines are grouped into a single code chunk
- Empty lines between code blocks are ignored
- Code blocks are separated by comments or section headers

**Important:** You can include comments WITHIN code blocks. These comments will be preserved inside the R code chunk:

```r
iris %>% 
  # Select a column
  select(Species)
```

This will render as:

````markdown
```{r, eval=FALSE}
#| eval: false
#| echo: true
iris %>% 
  # Select a column
  select(Species)
```
````

The difference:  
- **Comments at the start of a line** (standalone) ‚Üí become text OUTSIDE code blocks  
- **Comments within code** (indented or part of a pipeline) ‚Üí stay INSIDE code blocks

## Complete Example: example.R

Here's the complete example R script included in the package:

```r
library(dplyr)

## Title 2 ####

### Title 3 ====

# Start of statistical processing
# Counting the number of observations by species

iris |> 
  count(Species)

### Title 3 ====

# Filter the data.frame on Species "setosa"

iris |> 
  filter(Species == "setosa")

#### Title 4 ----

# Select column Species

iris %>% 
  # Select a column
  select(Species)
```

This script demonstrates:

1. **Code without section**: `library(dplyr)` becomes a code chunk
2. **Section headers**: `## Title 2 ####`, `### Title 3 ====`, `#### Title 4 ----`
3. **Standalone comments**: `# Select column Species` becomes readable text
4. **Inline comments**: `# Select a column` stays inside the code block
5. **Code blocks**: Separated by standalone comments or sections

## Converting the Example

Try converting the example script:

```{r eval=FALSE}
# Get the example file path
example_file <- system.file("examples", "example.R", package = "quartify")

# Convert it
rtoqmd(
  input_file = example_file,
  output_file = "iris_analysis.qmd",
  title = "Iris Dataset Analysis",
  author = "Data Analyst"
)
```

This will create both `iris_analysis.qmd` and `iris_analysis.html` files and open the HTML in your browser.

## Next Steps

Now that you've learned the basics of `quartify`, explore more advanced features:

üìñ **[Advanced Features Guide](advanced-features.html)** - Learn about:

- **Customization Options**: Themes, rendering options, output configuration
- **Batch Conversion**: Convert entire directories with `rtoqmd_dir()`
- **Quarto Books**: Automatically create navigable book projects
- **Code Quality Integration**: styler and lintr for code formatting and quality checks
- **Special Features**: Mermaid diagrams, callouts, and tabsets
- **CI/CD Integration**: Automate documentation generation

üá´üá∑ **[Version fran√ßaise](getting-started_FR.html)**: French version of this guide

## Tips for Success

1. **Start with structure**: Define your section headers first using RStudio code sections
2. **Use consistent levels**: Follow a logical hierarchy (2 ‚Üí 3 ‚Üí 4, don't skip levels)
3. **Add explanatory text**: Use regular comments (starting with `#` ) to explain your code
4. **Group related code**: Keep related operations together in the same chunk
5. **Test incrementally**: Start with a small script to understand the conversion
6. **Navigate easily**: In RStudio, use document outline (Ctrl+Shift+O) to see your structure
7. **Comment liberally**: More comments = better documentation

## Conclusion

`quartify` makes it easy to transform your R scripts into professional Quarto documents. By following RStudio code section conventions and using regular comments, you can automatically generate well-structured, reproducible documentation from your existing code.

For more advanced features, see the **[Advanced Features Guide](advanced-features.html)**.
